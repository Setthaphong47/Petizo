<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel - Petizo</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #f5f7fa;
            display: flex;
            min-height: 100vh;
        }

        .sidebar {
            width: 260px;
            background: white;
            box-shadow: 2px 0 10px rgba(0, 0, 0, 0.1);
            display: flex;
            flex-direction: column;
        }

        .logo {
            padding: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
            border-bottom: 1px solid #e0e0e0;
        }

        .logo-icon {
            font-size: 2rem;
        }

        .logo-text {
            font-size: 1.5rem;
            font-weight: bold;
        }

        .sidebar-menu {
            flex: 1;
            padding: 20px 0;
        }

        .menu-section {
            margin-bottom: 10px;
        }

        .menu-title {
            padding: 10px 20px;
            color: #999;
            font-size: 0.85rem;
            font-weight: 600;
            text-transform: uppercase;
        }

        .menu-item {
            padding: 12px 20px;
            display: flex;
            align-items: center;
            gap: 12px;
            cursor: pointer;
            transition: all 0.3s;
            color: #333;
            text-decoration: none;
        }

        .menu-item:hover {
            background: #f5f7fa;
        }

        .menu-item.active {
            background: #e6f7ff;
            color: #1890ff;
            border-right: 3px solid #1890ff;
        }

        .menu-icon {
            font-size: 1.2rem;
            width: 24px;
            text-align: center;
        }

        .sidebar-footer {
            padding: 20px;
            border-top: 1px solid #e0e0e0;
        }

        .logout-btn {
            width: 100%;
            padding: 12px;
            background: #ff4d4f;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
        }

        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .header {
            background: white;
            padding: 20px 30px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header-title {
            font-size: 1.5rem;
            color: #333;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.2rem;
        }

        .content-area {
            flex: 1;
            padding: 30px;
            overflow-y: auto;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .stat-label {
            color: #666;
            font-size: 0.9rem;
            margin-bottom: 8px;
        }

        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: #333;
        }

        .stat-change {
            font-size: 0.85rem;
            margin-top: 8px;
        }

        .stat-change.positive {
            color: #52c41a;
        }

        .stat-change.negative {
            color: #ff4d4f;
        }

        .card {
            background: white;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            padding: 25px;
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .card-title {
            font-size: 1.3rem;
            font-weight: 600;
            color: #333;
        }

        .search-box {
            padding: 10px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 0.95rem;
            width: 300px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th {
            background: #f5f7fa;
            padding: 15px;
            text-align: left;
            font-weight: 600;
            color: #333;
            border-bottom: 2px solid #e0e0e0;
        }

        td {
            padding: 15px;
            border-bottom: 1px solid #f0f0f0;
            color: #666;
        }

        tr:hover {
            background: #fafafa;
        }

        .status-badge {
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 0.85rem;
            font-weight: 600;
        }

        .status-active {
            background: #d4edda;
            color: #155724;
        }

        .status-hide {
            background: #f8d7da;
            color: #721c24;
        }

        .action-btn {
            padding: 6px 12px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9rem;
            margin-right: 5px;
        }

        .btn-edit {
            background: #1890ff;
            color: white;
        }

        .btn-delete {
            background: #ff4d4f;
            color: white;
        }

        .loading {
            text-align: center;
            padding: 40px;
            color: #999;
        }

        @media (max-width: 768px) {
            .sidebar {
                width: 200px;
            }

            .content-area {
                padding: 15px;
            }

            .search-box {
                width: 100%;
                margin-top: 10px;
            }
        }
    </style>
</head>
<body>
    <!-- Sidebar -->
    <div class="sidebar">
        <div class="logo">
            <div class="logo-icon">üê±</div>
            <div class="logo-text">Petizo</div>
        </div>

        <div class="sidebar-menu">
            <div class="menu-section">
                <div class="menu-title">‚óÄ ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Admin</div>
                <a href="#" class="menu-item active" onclick="showSection('users'); return false;">
                    <span class="menu-icon">üë•</span>
                    <span>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</span>
                </a>
                <a href="#" class="menu-item" onclick="showSection('breeds'); return false;">
                    <span class="menu-icon">‚öôÔ∏è</span>
                    <span>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏±‡∏ï‡∏ß‡πå‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á</span>
                </a>
                <a href="#" class="menu-item" onclick="showSection('blog'); return false;">
                    <span class="menu-icon">üìù</span>
                    <span>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏î‡∏π‡πÅ‡∏•‡∏™‡∏±‡∏ï‡∏ß‡πå‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á</span>
                </a>
                <a href="#" class="menu-item" onclick="showSection('vaccines'); return false;">
                    <span class="menu-icon">üíâ</span>
                    <span>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≤‡∏¢‡∏û‡∏±‡∏ô‡∏ò‡∏∏‡πå‡∏™‡∏±‡∏ï‡∏ß‡πå‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á</span>
                </a>
                <a href="#" class="menu-item" onclick="showSection('stats'); return false;">
                    <span class="menu-icon">üìä</span>
                    <span>‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡∏∞‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</span>
                </a>
            </div>
        </div>

        <div class="sidebar-footer">
            <button class="logout-btn" id="logoutBtn">‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</button>
        </div>
    </div>

    <!-- Main Content -->
    <div class="main-content">
        <!-- Header -->
        <div class="header">
            <div class="header-title" id="pageTitle">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</div>
            <div class="user-info">
                <span id="adminName">Admin 1</span>
                <div class="user-avatar">üë§</div>
            </div>
        </div>

        <!-- Content Area -->
        <div class="content-area">
            <!-- Stats Section -->
            <div id="statsSection" style="display: none;">
                <!-- Stats Cards -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-label">‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÄ‡∏õ‡∏¥‡∏î‡∏à‡∏ö‡∏ô‡∏µ‡πâ</div>
                        <div class="stat-value" id="statsUsers">0</div>
                        <div class="stat-change positive" id="statsUsersChange">+110.33% ‚Üó</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏™‡∏±‡∏ï‡∏ß‡πå‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á</div>
                        <div class="stat-value" id="statsPets">0</div>
                        <div class="stat-change negative" id="statsPetsChange">-0.03% ‚Üò</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô Chatbot</div>
                        <div class="stat-value" id="statsChats">0</div>
                        <div class="stat-change negative" id="statsChatsChange">-31.29% ‚Üò</div>
                    </div>
                </div>

                <!-- Charts -->
                <div style="display: grid; gap: 20px; margin-top: 30px;">
                    <!-- Main Chart -->
                    <div class="card">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                            <h3>üìä ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</h3>
                        </div>
                        <canvas id="usersChart" style="max-height: 400px;"></canvas>
                    </div>

                    <!-- Secondary Charts -->
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                        <div class="card">
                            <h3 style="margin-bottom: 20px;">üìä ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏™‡∏±‡∏ï‡∏ß‡πå‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á</h3>
                            <canvas id="petsChart" style="max-height: 300px;"></canvas>
                        </div>
                        <div class="card">
                            <h3 style="margin-bottom: 20px;">üìä ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô Chatbot</h3>
                            <canvas id="chatsChart" style="max-height: 300px;"></canvas>
                        </div>
                    </div>
                </div>
            </div>

            <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

            <script>
            let usersChart, petsChart, chatsChart;

            // Load stats and create charts
            async function loadStatsAndCharts() {
                try {
                    // Load basic stats
                    const response = await fetch(`${API_URL}/admin/stats`, {
                        headers: {
                            'Authorization': `Bearer ${localStorage.getItem('token')}`
                        }
                    });
                    
                    const stats = await response.json();
                    
                    // Update stat cards
                    document.getElementById('statsUsers').textContent = stats.total_users || 0;
                    document.getElementById('statsPets').textContent = stats.total_pets || 0;
                    document.getElementById('statsChats').textContent = stats.total_chats || 0;
                    
                    // Create charts with sample data
                    createCharts();
                    
                } catch (error) {
                    console.error('Error loading stats:', error);
                }
            }

            // Create charts
            function createCharts() {
                // Sample data for demonstration
                const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep'];
                
                // Users Chart (Line Chart)
                const usersCtx = document.getElementById('usersChart');
                if (usersChart) usersChart.destroy();
                
                usersChart = new Chart(usersCtx, {
                    type: 'line',
                    data: {
                        labels: months,
                        datasets: [
                            {
                                label: '2567',
                                data: [10000, 0, 20000, 2000, 25000, 12000, 14000, 11000, 12000],
                                borderColor: '#A78BFA',
                                backgroundColor: 'rgba(167, 139, 250, 0.1)',
                                tension: 0.4,
                                fill: true
                            },
                            {
                                label: '2568',
                                data: [12000, 10000, 21000, 13000, 12000, 27000, 26000, 6000, 25000],
                                borderColor: '#F87171',
                                backgroundColor: 'rgba(248, 113, 113, 0.1)',
                                tension: 0.4,
                                fill: true
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: true,
                        plugins: {
                            legend: {
                                position: 'bottom'
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                ticks: {
                                    callback: function(value) {
                                        return value.toLocaleString();
                                    }
                                }
                            }
                        }
                    }
                });

                // Pets Chart (Bar Chart)
                const petsCtx = document.getElementById('petsChart');
                if (petsChart) petsChart.destroy();
                
                petsChart = new Chart(petsCtx, {
                    type: 'bar',
                    data: {
                        labels: months,
                        datasets: [
                            {
                                label: '2567',
                                data: [32000, 25000, 15000, 50000, 20000, 25000, 30000, 25000, 18000],
                                backgroundColor: '#F87171'
                            },
                            {
                                label: '2568',
                                data: [50000, 25000, 50000, 25000, 40000, 23000, 25000, 24000, 0],
                                backgroundColor: '#A78BFA'
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: true,
                        plugins: {
                            legend: {
                                position: 'bottom'
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                ticks: {
                                    callback: function(value) {
                                        return value.toLocaleString();
                                    }
                                }
                            }
                        }
                    }
                });

                // Chats Chart (Line Chart)
                const chatsCtx = document.getElementById('chatsChart');
                if (chatsChart) chatsChart.destroy();
                
                chatsChart = new Chart(chatsCtx, {
                    type: 'line',
                    data: {
                        labels: months,
                        datasets: [
                            {
                                label: '2567',
                                data: [7500, 17000, 20000, 18000, 4000, 20000, 12000, 20000, 6000],
                                borderColor: '#A78BFA',
                                backgroundColor: 'rgba(167, 139, 250, 0.1)',
                                tension: 0.4,
                                fill: true
                            },
                            {
                                label: '2568',
                                data: [10000, 18000, 20000, 13000, 25000, 20000, 19000, 12000, 8000],
                                borderColor: '#F87171',
                                backgroundColor: 'rgba(248, 113, 113, 0.1)',
                                tension: 0.4,
                                fill: true
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: true,
                        plugins: {
                            legend: {
                                position: 'bottom'
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                ticks: {
                                    callback: function(value) {
                                        return value.toLocaleString();
                                    }
                                }
                            }
                        }
                    }
                });
            }
            </script>

            <!-- Users Section -->
            <div id="usersSection">
                <div class="stats-grid" style="margin-bottom: 30px;">
                    <div class="stat-card">
                        <div class="stat-label">‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÄ‡∏õ‡∏¥‡∏î‡∏à‡∏ö‡∏ô‡∏µ</div>
                        <div class="stat-value" id="activeUsers">0</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏•‡πá‡∏≠‡∏Ñ</div>
                        <div class="stat-value" id="hiddenUsers">0</div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</h3>
                        <input type="text" class="search-box" placeholder="üîç ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤" id="searchInput" onkeyup="filterUsers()">
                    </div>

                    <div id="usersTableContainer">
                        <div class="loading">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...</div>
                    </div>
                </div>
            </div>

            <div id="breedsSection" style="display: none;">
                <div class="card" style="margin-bottom: 30px;">
                    <div class="card-header">
                        <h3 class="card-title">üê± ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏î‡∏π‡πÅ‡∏•‡∏™‡∏±‡∏ï‡∏ß‡πå‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á</h3>
                        <button class="action-btn btn-edit" onclick="openBreedModal()" 
                                style="padding: 12px 24px; font-size: 1rem;">
                            + ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
                        </button>
                    </div>
                </div>

                <div id="breedsGrid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px;">
                    <div class="loading">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...</div>
                </div>
            </div>

            <!-- Breed Modal -->
            <div id="breedModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
                background: rgba(0,0,0,0.5); z-index: 1000; align-items: center; justify-content: center;">
                <div style="background: white; border-radius: 15px; padding: 30px; max-width: 600px; width: 90%; max-height: 90vh; overflow-y: auto;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                        <h2 id="breedModalTitle">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏î‡∏π‡πÅ‡∏•</h2>
                        <button onclick="closeBreedModal()" style="background: none; border: none; font-size: 1.5rem; cursor: pointer;">√ó</button>
                    </div>

                    <form id="breedForm" onsubmit="handleBreedSubmit(event)">
                        <div style="margin-bottom: 20px;">
                            <label style="display: block; margin-bottom: 8px; font-weight: 600;">‡∏´‡∏±‡∏ß‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏î‡∏π‡πÅ‡∏•‡∏™‡∏±‡∏ï‡∏ß‡πå‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á *</label>
                            <input type="text" id="breedName" required 
                                style="width: 100%; padding: 12px; border: 2px solid #e0e0e0; border-radius: 8px;"
                                placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡πÅ‡∏°‡∏ß‡∏£‡πâ‡∏≠‡∏á‡πÑ‡∏´‡πâ‡πÑ‡∏î‡πâ‡πÑ‡∏´‡∏° ?">
                        </div>

                        <div style="margin-bottom: 20px;">
                            <label style="display: block; margin-bottom: 8px; font-weight: 600;">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°</label>
                            <textarea id="breedDescription" rows="8" 
                                    style="width: 100%; padding: 12px; border: 2px solid #e0e0e0; border-radius: 8px;"
                                    placeholder="‡∏Å‡∏•‡πà‡∏≤‡∏ß‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏ä‡∏¥‡∏á‡∏•‡∏∂‡∏Å‡πÄ‡∏Ç‡πâ‡∏≤‡∏ï‡πà‡∏≠‡πÅ‡∏°‡∏ß ‡πÅ‡∏ï‡πà‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡∏°‡∏≤‡∏û‡∏£‡∏≤‡∏£‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏¢‡∏Å‡∏±‡∏ö‡∏°‡∏∑‡∏≠‡∏≠‡∏°‡∏°‡∏∑‡∏≠‡∏≠‡∏¢‡∏ä‡∏≠‡∏¢‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏ó‡∏≤‡∏á‡∏ô‡πâ‡∏≥‡∏ô‡∏±‡πà‡∏ô‡∏´‡∏≤‡∏£‡∏∞‡πÄ‡∏°‡∏µ‡πÜ‡πÄ‡πÄ‡∏ô‡∏£‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏µ‡∏ï‡πà‡∏≠‡∏ó‡∏≥‡πÄ‡∏ô‡∏∑‡πâ‡∏≠ (obligate carnivore)"></textarea>
                        </div>

                        <div style="margin-bottom: 20px;">
                            <label style="display: block; margin-bottom: 8px; font-weight: 600;">Photos</label>
                            <input type="file" id="breedImage" accept="image/*"
                                style="width: 100%; padding: 12px; border: 2px solid #e0e0e0; border-radius: 8px;">
                            <div id="currentImage" style="margin-top: 10px;"></div>
                        </div>

                        <div style="display: flex; gap: 10px; justify-content: flex-end;">
                            <button type="button" onclick="closeBreedModal()" 
                                    style="padding: 12px 24px; background: #f0f0f0; border: none; border-radius: 8px; cursor: pointer;">
                                ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å
                            </button>
                            <button type="submit" 
                                    style="padding: 12px 24px; background: #1890ff; color: white; border: none; border-radius: 8px; cursor: pointer;">
                                ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å
                            </button>
                        </div>
                    </form>
                </div>
            </div>

            <style>
            .breed-card {
                background: white;
                border-radius: 12px;
                overflow: hidden;
                box-shadow: 0 2px 10px rgba(0,0,0,0.1);
                transition: transform 0.3s;
            }

            .breed-card:hover {
                transform: translateY(-5px);
            }

            .breed-image {
                width: 100%;
                height: 200px;
                object-fit: cover;
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 60px;
                color: white;
            }

            .breed-content {
                padding: 20px;
            }

            .breed-title {
                font-size: 1.2rem;
                font-weight: 600;
                margin-bottom: 10px;
                color: #333;
            }

            .breed-description {
                color: #666;
                font-size: 0.9rem;
                line-height: 1.6;
                margin-bottom: 15px;
                display: -webkit-box;
                -webkit-line-clamp: 3;
                -webkit-box-orient: vertical;
                line-clamp: 3;
                overflow: hidden;
            }

            .breed-actions {
                display: flex;
                gap: 10px;
                padding-top: 15px;
                border-top: 1px solid #f0f0f0;
            }
            </style>

            <script>
            let currentBreedId = null;
            let allBreeds = [];

            // Load breeds
            async function loadBreeds() {
                try {
                    const response = await fetch(`${API_URL}/breeds`);
                    allBreeds = await response.json();
                    displayBreeds(allBreeds);
                } catch (error) {
                    console.error('Error loading breeds:', error);
                    document.getElementById('breedsGrid').innerHTML = 
                        '<div class="loading">‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏î‡πâ</div>';
                }
            }

            // Display breeds
            function displayBreeds(breeds) {
                const grid = document.getElementById('breedsGrid');
                
                if (breeds.length === 0) {
                    grid.innerHTML = `
                        <div style="grid-column: 1/-1; text-align: center; padding: 60px; color: #999;">
                            <div style="font-size: 60px; margin-bottom: 15px;">üìù</div>
                            <p>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• ‡∏Ñ‡∏•‡∏¥‡∏Å "+ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•" ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏û‡∏¥‡πà‡∏°</p>
                        </div>
                    `;
                    return;
                }
                
                grid.innerHTML = breeds.map(breed => `
                    <div class="breed-card">
                        <div class="breed-image">
                            ${breed.image_url ? `<img src="${breed.image_url}" style="width:100%; height:100%; object-fit:cover;">` : 'üìù'}
                        </div>
                        <div class="breed-content">
                            <div class="breed-title">${breed.name}</div>
                            <div class="breed-description">${breed.description || '‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢'}</div>
                            <div class="breed-actions">
                                <button class="action-btn btn-edit" onclick="editBreed(${breed.id})" style="flex: 1;">
                                    ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç
                                </button>
                                <button class="action-btn btn-delete" onclick="deleteBreed(${breed.id}, '${breed.name}')" style="flex: 1;">
                                    ‡∏•‡∏ö
                                </button>
                            </div>
                        </div>
                    </div>
                `).join('');
            }

            // Open breed modal
            function openBreedModal() {
                currentBreedId = null;
                document.getElementById('breedModalTitle').textContent = '‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏î‡∏π‡πÅ‡∏•';
                document.getElementById('breedForm').reset();
                document.getElementById('currentImage').innerHTML = '';
                document.getElementById('breedModal').style.display = 'flex';
            }

            // Close breed modal
            function closeBreedModal() {
                document.getElementById('breedModal').style.display = 'none';
            }

            // Edit breed
            function editBreed(breedId) {
                const breed = allBreeds.find(b => b.id === breedId);
                if (!breed) return;
                
                currentBreedId = breedId;
                document.getElementById('breedModalTitle').textContent = '‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•';
                document.getElementById('breedName').value = breed.name;
                document.getElementById('breedDescription').value = breed.description || '';
                
                if (breed.image_url) {
                    document.getElementById('currentImage').innerHTML = `
                        <img src="${breed.image_url}" style="max-width: 200px; border-radius: 8px;">
                    `;
                }
                
                document.getElementById('breedModal').style.display = 'flex';
            }

            // Handle breed submit
            async function handleBreedSubmit(event) {
                event.preventDefault();
                
                const formData = new FormData();
                formData.append('name', document.getElementById('breedName').value);
                formData.append('description', document.getElementById('breedDescription').value);
                
                const imageFile = document.getElementById('breedImage').files[0];
                if (imageFile) {
                    formData.append('image', imageFile);
                }
                
                try {
                    const url = currentBreedId 
                        ? `${API_URL}/breeds/${currentBreedId}`
                        : `${API_URL}/breeds`;
                    
                    const response = await fetch(url, {
                        method: currentBreedId ? 'PUT' : 'POST',
                        headers: {
                            'Authorization': `Bearer ${localStorage.getItem('token')}`
                        },
                        body: formData
                    });
                    
                    if (response.ok) {
                        alert(currentBreedId ? '‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à' : '‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à');
                        closeBreedModal();
                        loadBreeds();
                    } else {
                        alert('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î');
                    }
                } catch (error) {
                    console.error('Error:', error);
                    alert('‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ö‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå‡πÑ‡∏î‡πâ');
                }
            }

            // Delete breed
            async function deleteBreed(breedId, breedName) {
                if (!confirm(`‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö "${breedName}" ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?`)) {
                    return;
                }
                
                try {
                    const response = await fetch(`${API_URL}/breeds/${breedId}`, {
                        method: 'DELETE',
                        headers: {
                            'Authorization': `Bearer ${localStorage.getItem('token')}`
                        }
                    });
                    
                    if (response.ok) {
                        alert('‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à');
                        loadBreeds();
                    } else {
                        alert('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î');
                    }
                } catch (error) {
                    console.error('Error:', error);
                    alert('‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ö‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå‡πÑ‡∏î‡πâ');
                }
            }

            // Load breeds when breeds section is shown
            document.addEventListener('DOMContentLoaded', () => {
                // Call loadBreeds when needed
            });
            </script>

            <div id="blogSection" style="display: none;">
                <div class="card" style="margin-bottom: 30px;">
                    <div class="card-header">
                        <h3 class="card-title">üìù ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ö‡∏ó‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏≤‡∏£‡∏î‡∏π‡πÅ‡∏•‡∏™‡∏±‡∏ï‡∏ß‡πå‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á</h3>
                        <button class="action-btn btn-edit" onclick="openBlogModal()" 
                                style="padding: 12px 24px; font-size: 1rem;">
                            + ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ö‡∏ó‡∏Ñ‡∏ß‡∏≤‡∏°‡πÉ‡∏´‡∏°‡πà
                        </button>
                    </div>
                </div>

                <div id="blogGrid" style="display: grid; gap: 20px;">
                    <div class="loading">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...</div>
                </div>
            </div>

            <!-- Blog Modal -->
            <div id="blogModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
                background: rgba(0,0,0,0.5); z-index: 1000; align-items: center; justify-content: center;">
                <div style="background: white; border-radius: 15px; padding: 30px; max-width: 800px; width: 90%; max-height: 90vh; overflow-y: auto;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                        <h2 id="blogModalTitle">‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ö‡∏ó‡∏Ñ‡∏ß‡∏≤‡∏°‡πÉ‡∏´‡∏°‡πà</h2>
                        <button onclick="closeBlogModal()" style="background: none; border: none; font-size: 1.5rem; cursor: pointer;">√ó</button>
                    </div>

                    <form id="blogForm" onsubmit="handleBlogSubmit(event)">
                        <div style="margin-bottom: 20px;">
                            <label style="display: block; margin-bottom: 8px; font-weight: 600;">‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏ö‡∏ó‡∏Ñ‡∏ß‡∏≤‡∏° *</label>
                            <input type="text" id="blogTitle" required 
                                style="width: 100%; padding: 12px; border: 2px solid #e0e0e0; border-radius: 8px;"
                                placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏ß‡∏¥‡∏ò‡∏µ‡∏î‡∏π‡πÅ‡∏•‡πÅ‡∏°‡∏ß‡πÉ‡∏´‡πâ‡∏°‡∏µ‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û‡∏î‡∏µ">
                        </div>

                        <div style="margin-bottom: 20px;">
                            <label style="display: block; margin-bottom: 8px; font-weight: 600;">Slug (URL) *</label>
                            <input type="text" id="blogSlug" required 
                                style="width: 100%; padding: 12px; border: 2px solid #e0e0e0; border-radius: 8px;"
                                placeholder="cat-health-care-tips">
                            <small style="color: #999;">‡πÉ‡∏ä‡πâ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£‡∏†‡∏≤‡∏©‡∏≤‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏©‡πÅ‡∏•‡∏∞‡∏Ç‡∏µ‡∏î (-) ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô</small>
                        </div>

                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 20px;">
                            <div>
                                <label style="display: block; margin-bottom: 8px; font-weight: 600;">‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà</label>
                                <select id="blogCategory" 
                                        style="width: 100%; padding: 12px; border: 2px solid #e0e0e0; border-radius: 8px;">
                                    <option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà</option>
                                    <option value="‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û">‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û</option>
                                    <option value="‡πÇ‡∏†‡∏ä‡∏ô‡∏≤‡∏Å‡∏≤‡∏£">‡πÇ‡∏†‡∏ä‡∏ô‡∏≤‡∏Å‡∏≤‡∏£</option>
                                    <option value="‡∏û‡∏§‡∏ï‡∏¥‡∏Å‡∏£‡∏£‡∏°">‡∏û‡∏§‡∏ï‡∏¥‡∏Å‡∏£‡∏£‡∏°</option>
                                    <option value="‡∏Å‡∏≤‡∏£‡∏î‡∏π‡πÅ‡∏•">‡∏Å‡∏≤‡∏£‡∏î‡∏π‡πÅ‡∏•</option>
                                    <option value="‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ">‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ</option>
                                </select>
                            </div>
                            <div>
                                <label style="display: block; margin-bottom: 8px; font-weight: 600;">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</label>
                                <select id="blogStatus" 
                                        style="width: 100%; padding: 12px; border: 2px solid #e0e0e0; border-radius: 8px;">
                                    <option value="draft">‡πÅ‡∏ö‡∏ö‡∏£‡πà‡∏≤‡∏á (Draft)</option>
                                    <option value="published">‡πÄ‡∏ú‡∏¢‡πÅ‡∏û‡∏£‡πà (Published)</option>
                                </select>
                            </div>
                        </div>

                        <div style="margin-bottom: 20px;">
                            <label style="display: block; margin-bottom: 8px; font-weight: 600;">‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏™‡∏±‡πâ‡∏ô (Excerpt)</label>
                            <textarea id="blogExcerpt" rows="2" 
                                    style="width: 100%; padding: 12px; border: 2px solid #e0e0e0; border-radius: 8px;"
                                    placeholder="‡∏™‡∏£‡∏∏‡∏õ‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏ö‡∏ó‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏±‡πâ‡∏ô‡πÜ 1-2 ‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏Ñ"></textarea>
                        </div>

                        <div style="margin-bottom: 20px;">
                            <label style="display: block; margin-bottom: 8px; font-weight: 600;">‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏ö‡∏ó‡∏Ñ‡∏ß‡∏≤‡∏° *</label>
                            <textarea id="blogContent" required rows="10" 
                                    style="width: 100%; padding: 12px; border: 2px solid #e0e0e0; border-radius: 8px;"
                                    placeholder="‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏ö‡∏ó‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà..."></textarea>
                        </div>

                        <div style="margin-bottom: 20px;">
                            <label style="display: block; margin-bottom: 8px; font-weight: 600;">‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏´‡∏ô‡πâ‡∏≤‡∏õ‡∏Å</label>
                            <input type="file" id="blogImage" accept="image/*"
                                style="width: 100%; padding: 12px; border: 2px solid #e0e0e0; border-radius: 8px;">
                            <div id="currentBlogImage" style="margin-top: 10px;"></div>
                        </div>

                        <div style="margin-bottom: 20px;">
                            <label style="display: block; margin-bottom: 8px; font-weight: 600;">‡πÅ‡∏ó‡πá‡∏Å (Tags)</label>
                            <input type="text" id="blogTags" 
                                style="width: 100%; padding: 12px; border: 2px solid #e0e0e0; border-radius: 8px;"
                                placeholder="‡πÅ‡∏°‡∏ß, ‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û, ‡∏ß‡∏±‡∏Ñ‡∏ã‡∏µ‡∏ô">
                            <small style="color: #999;">‡∏Ñ‡∏±‡πà‡∏ô‡πÅ‡∏ï‡πà‡∏•‡∏∞‡πÅ‡∏ó‡πá‡∏Å‡∏î‡πâ‡∏ß‡∏¢‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏´‡∏°‡∏≤‡∏¢‡∏à‡∏∏‡∏•‡∏†‡∏≤‡∏Ñ (,)</small>
                        </div>

                        <div style="display: flex; gap: 10px; justify-content: flex-end;">
                            <button type="button" onclick="closeBlogModal()" 
                                    style="padding: 12px 24px; background: #f0f0f0; border: none; border-radius: 8px; cursor: pointer;">
                                ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å
                            </button>
                            <button type="submit" 
                                    style="padding: 12px 24px; background: #1890ff; color: white; border: none; border-radius: 8px; cursor: pointer;">
                                ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å
                            </button>
                        </div>
                    </form>
                </div>
            </div>

            <style>
            .blog-card {
                background: white;
                border-radius: 12px;
                padding: 25px;
                box-shadow: 0 2px 10px rgba(0,0,0,0.1);
                display: grid;
                grid-template-columns: 1fr auto;
                gap: 20px;
                align-items: start;
            }

            .blog-info h3 {
                color: #333;
                margin-bottom: 10px;
                font-size: 1.3rem;
            }

            .blog-meta {
                display: flex;
                gap: 15px;
                color: #999;
                font-size: 0.9rem;
                margin-bottom: 10px;
            }

            .blog-excerpt {
                color: #666;
                line-height: 1.6;
                margin-bottom: 10px;
            }

            .blog-actions {
                display: flex;
                flex-direction: column;
                gap: 10px;
            }
            </style>

            <script>
            let currentBlogId = null;
            let allBlogPosts = [];

            // Auto-generate slug from title
            document.addEventListener('DOMContentLoaded', () => {
                const titleInput = document.getElementById('blogTitle');
                if (titleInput) {
                    titleInput.addEventListener('input', (e) => {
                        if (!currentBlogId) {
                            const slug = e.target.value
                                .toLowerCase()
                                .replace(/[^\w\s-]/g, '')
                                .replace(/\s+/g, '-')
                                .replace(/-+/g, '-');
                            document.getElementById('blogSlug').value = slug;
                        }
                    });
                }
            });

            // Load blog posts
            async function loadBlogPosts() {
                try {
                    const response = await fetch(`${API_URL}/blog`, {
                        headers: {
                            'Authorization': `Bearer ${localStorage.getItem('token')}`
                        }
                    });
                    allBlogPosts = await response.json();
                    displayBlogPosts(allBlogPosts);
                } catch (error) {
                    console.error('Error loading blog posts:', error);
                    document.getElementById('blogGrid').innerHTML = 
                        '<div class="loading">‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏î‡πâ</div>';
                }
            }

            // Display blog posts
            function displayBlogPosts(posts) {
                const grid = document.getElementById('blogGrid');
                
                if (posts.length === 0) {
                    grid.innerHTML = `
                        <div style="text-align: center; padding: 60px; color: #999;">
                            <div style="font-size: 60px; margin-bottom: 15px;">üìù</div>
                            <p>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ö‡∏ó‡∏Ñ‡∏ß‡∏≤‡∏° ‡∏Ñ‡∏•‡∏¥‡∏Å "+ ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ö‡∏ó‡∏Ñ‡∏ß‡∏≤‡∏°‡πÉ‡∏´‡∏°‡πà" ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô</p>
                        </div>
                    `;
                    return;
                }
                
                grid.innerHTML = posts.map(post => `
                    <div class="blog-card">
                        <div class="blog-info">
                            <h3>${post.title}</h3>
                            <div class="blog-meta">
                                <span>üìÖ ${new Date(post.created_at).toLocaleDateString('th-TH')}</span>
                                <span>üìÇ ${post.category || '‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏'}</span>
                                <span class="status-badge ${post.status === 'published' ? 'status-active' : 'status-hide'}">
                                    ${post.status === 'published' ? '‚úì ‡πÄ‡∏ú‡∏¢‡πÅ‡∏û‡∏£‡πà' : 'üìù ‡πÅ‡∏ö‡∏ö‡∏£‡πà‡∏≤‡∏á'}
                                </span>
                            </div>
                            <div class="blog-excerpt">${post.excerpt || post.content.substring(0, 150) + '...'}</div>
                        </div>
                        <div class="blog-actions">
                            <button class="action-btn btn-edit" onclick="editBlogPost(${post.id})">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
                            <button class="action-btn btn-delete" onclick="deleteBlogPost(${post.id}, '${post.title.replace(/'/g, "\\'")}')">‡∏•‡∏ö</button>
                        </div>
                    </div>
                `).join('');
            }

            // Open blog modal
            function openBlogModal() {
                currentBlogId = null;
                document.getElementById('blogModalTitle').textContent = '‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ö‡∏ó‡∏Ñ‡∏ß‡∏≤‡∏°‡πÉ‡∏´‡∏°‡πà';
                document.getElementById('blogForm').reset();
                document.getElementById('currentBlogImage').innerHTML = '';
                document.getElementById('blogModal').style.display = 'flex';
            }

            // Close blog modal
            function closeBlogModal() {
                document.getElementById('blogModal').style.display = 'none';
            }

            // Edit blog post
            async function editBlogPost(postId) {
                try {
                    const response = await fetch(`${API_URL}/blog/post/${postId}`, {
                        headers: {
                            'Authorization': `Bearer ${localStorage.getItem('token')}`
                        }
                    });
                    
                    const post = await response.json();
                    
                    currentBlogId = postId;
                    document.getElementById('blogModalTitle').textContent = '‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ö‡∏ó‡∏Ñ‡∏ß‡∏≤‡∏°';
                    document.getElementById('blogTitle').value = post.title;
                    document.getElementById('blogSlug').value = post.slug;
                    document.getElementById('blogCategory').value = post.category || '';
                    document.getElementById('blogStatus').value = post.status;
                    document.getElementById('blogExcerpt').value = post.excerpt || '';
                    document.getElementById('blogContent').value = post.content;
                    document.getElementById('blogTags').value = post.tags || '';
                    
                    if (post.featured_image) {
                        document.getElementById('currentBlogImage').innerHTML = `
                            <img src="${post.featured_image}" style="max-width: 200px; border-radius: 8px;">
                        `;
                    }
                    
                    document.getElementById('blogModal').style.display = 'flex';
                } catch (error) {
                    console.error('Error loading post:', error);
                    alert('‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÇ‡∏´‡∏•‡∏î‡∏ö‡∏ó‡∏Ñ‡∏ß‡∏≤‡∏°‡πÑ‡∏î‡πâ');
                }
            }

            // Handle blog submit
            async function handleBlogSubmit(event) {
                event.preventDefault();
                
                const formData = new FormData();
                formData.append('title', document.getElementById('blogTitle').value);
                formData.append('slug', document.getElementById('blogSlug').value);
                formData.append('content', document.getElementById('blogContent').value);
                formData.append('excerpt', document.getElementById('blogExcerpt').value);
                formData.append('category', document.getElementById('blogCategory').value);
                formData.append('tags', document.getElementById('blogTags').value);
                formData.append('status', document.getElementById('blogStatus').value);
                
                const imageFile = document.getElementById('blogImage').files[0];
                if (imageFile) {
                    formData.append('image', imageFile);
                }
                
                try {
                    const url = currentBlogId 
                        ? `${API_URL}/blog/${currentBlogId}`
                        : `${API_URL}/blog`;
                    
                    const response = await fetch(url, {
                        method: currentBlogId ? 'PUT' : 'POST',
                        headers: {
                            'Authorization': `Bearer ${localStorage.getItem('token')}`
                        },
                        body: formData
                    });
                    
                    if (response.ok) {
                        alert(currentBlogId ? '‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏ö‡∏ó‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à' : '‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ö‡∏ó‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à');
                        closeBlogModal();
                        loadBlogPosts();
                    } else {
                        const data = await response.json();
                        alert('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î: ' + (data.error || '‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ö‡∏ó‡∏Ñ‡∏ß‡∏≤‡∏°‡πÑ‡∏î‡πâ'));
                    }
                } catch (error) {
                    console.error('Error:', error);
                    alert('‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ö‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå‡πÑ‡∏î‡πâ');
                }
            }

            // Delete blog post
            async function deleteBlogPost(postId, title) {
                if (!confirm(`‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏ö‡∏ó‡∏Ñ‡∏ß‡∏≤‡∏° "${title}" ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?`)) {
                    return;
                }
                
                try {
                    const response = await fetch(`${API_URL}/blog/${postId}`, {
                        method: 'DELETE',
                        headers: {
                            'Authorization': `Bearer ${localStorage.getItem('token')}`
                        }
                    });
                    
                    if (response.ok) {
                        alert('‡∏•‡∏ö‡∏ö‡∏ó‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à');
                        loadBlogPosts();
                    } else {
                        alert('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î');
                    }
                } catch (error) {
                    console.error('Error:', error);
                    alert('‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ö‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå‡πÑ‡∏î‡πâ');
                }
            }
            </script>

            <div id="vaccinesSection" style="display: none;">
                <div class="card" style="margin-bottom: 30px;">
                    <div class="card-header">
                        <h3 class="card-title">üíâ ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏Ñ‡∏ã‡∏µ‡∏ô‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô</h3>
                        <button class="action-btn btn-edit" onclick="openVaccineScheduleModal()" 
                                style="padding: 12px 24px; font-size: 1rem;">
                            + ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏Ñ‡∏ã‡∏µ‡∏ô
                        </button>
                    </div>
                    <p style="color: #666; margin-top: 10px;">
                        ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏Ñ‡∏ã‡∏µ‡∏ô‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô‡∏ï‡∏≤‡∏°‡∏ä‡πà‡∏ß‡∏á‡∏≠‡∏≤‡∏¢‡∏∏‡∏Ç‡∏≠‡∏á‡πÅ‡∏°‡∏ß ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ô‡∏µ‡πâ‡πÉ‡∏´‡πâ‡∏Å‡∏±‡∏ö‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÇ‡∏î‡∏¢‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
                    </p>
                </div>

                <!-- Vaccine Schedules Table -->
                <div class="card">
                    <div id="vaccineSchedulesTableContainer">
                        <div class="loading">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...</div>
                    </div>
                </div>
            </div>

            <!-- Vaccine Schedule Modal -->
            <div id="vaccineScheduleModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
                background: rgba(0,0,0,0.5); z-index: 1000; align-items: center; justify-content: center;">
                <div style="background: white; border-radius: 15px; padding: 30px; max-width: 600px; width: 90%; max-height: 90vh; overflow-y: auto;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                        <h2 id="vaccineScheduleModalTitle">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏Ñ‡∏ã‡∏µ‡∏ô</h2>
                        <button onclick="closeVaccineScheduleModal()" style="background: none; border: none; font-size: 1.5rem; cursor: pointer;">√ó</button>
                    </div>

                    <form id="vaccineScheduleForm" onsubmit="handleVaccineScheduleSubmit(event)">
                        <div style="margin-bottom: 20px;">
                            <label style="display: block; margin-bottom: 8px; font-weight: 600;">‡∏ä‡∏∑‡πà‡∏≠‡∏ß‡∏±‡∏Ñ‡∏ã‡∏µ‡∏ô *</label>
                            <input type="text" id="scheduleVaccineName" required 
                                style="width: 100%; padding: 12px; border: 2px solid #e0e0e0; border-radius: 8px;"
                                placeholder="‡πÄ‡∏ä‡πà‡∏ô FVRCP (‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà 1)">
                        </div>

                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 20px;">
                            <div>
                                <label style="display: block; margin-bottom: 8px; font-weight: 600;">‡∏≠‡∏≤‡∏¢‡∏∏‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡πà‡∏≥ (‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå) *</label>
                                <input type="number" id="scheduleAgeMin" required min="0"
                                    style="width: 100%; padding: 12px; border: 2px solid #e0e0e0; border-radius: 8px;">
                            </div>
                            <div>
                                <label style="display: block; margin-bottom: 8px; font-weight: 600;">‡∏≠‡∏≤‡∏¢‡∏∏‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î (‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå)</label>
                                <input type="number" id="scheduleAgeMax" min="0"
                                    style="width: 100%; padding: 12px; border: 2px solid #e0e0e0; border-radius: 8px;"
                                    placeholder="‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏ = ‡πÑ‡∏°‡πà‡∏à‡∏≥‡∏Å‡∏±‡∏î">
                            </div>
                        </div>

                        <div style="margin-bottom: 20px;">
                            <label style="display: flex; align-items: center; gap: 10px; cursor: pointer;">
                                <input type="checkbox" id="scheduleIsBooster" style="width: 20px; height: 20px;">
                                <span style="font-weight: 600;">‡πÄ‡∏õ‡πá‡∏ô‡∏ß‡∏±‡∏Ñ‡∏ã‡∏µ‡∏ô‡∏ö‡∏π‡∏™‡πÄ‡∏ï‡∏≠‡∏£‡πå (‡∏â‡∏µ‡∏î‡∏ã‡πâ‡∏≥)</span>
                            </label>
                        </div>

                        <div style="margin-bottom: 20px;" id="frequencyField" style="display: none;">
                            <label style="display: block; margin-bottom: 8px; font-weight: 600;">‡∏â‡∏µ‡∏î‡∏ã‡πâ‡∏≥‡∏ó‡∏∏‡∏Å‡∏Å‡∏µ‡πà‡∏õ‡∏µ</label>
                            <input type="number" id="scheduleFrequency" min="1"
                                style="width: 100%; padding: 12px; border: 2px solid #e0e0e0; border-radius: 8px;"
                                placeholder="‡πÄ‡∏ä‡πà‡∏ô 1 (‡∏õ‡∏µ)">
                        </div>

                        <div style="margin-bottom: 20px;">
                            <label style="display: block; margin-bottom: 8px; font-weight: 600;">‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢</label>
                            <textarea id="scheduleDescription" rows="3"
                                    style="width: 100%; padding: 12px; border: 2px solid #e0e0e0; border-radius: 8px;"
                                    placeholder="‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏ß‡∏±‡∏Ñ‡∏ã‡∏µ‡∏ô ‡πÄ‡∏ä‡πà‡∏ô ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡πÇ‡∏£‡∏Ñ‡∏≠‡∏∞‡πÑ‡∏£"></textarea>
                        </div>

                        <div style="display: flex; gap: 10px; justify-content: flex-end;">
                            <button type="button" onclick="closeVaccineScheduleModal()" 
                                    style="padding: 12px 24px; background: #f0f0f0; border: none; border-radius: 8px; cursor: pointer;">
                                ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å
                            </button>
                            <button type="submit" 
                                    style="padding: 12px 24px; background: #1890ff; color: white; border: none; border-radius: 8px; cursor: pointer;">
                                ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å
                            </button>
                        </div>
                    </form>
                </div>
            </div>

            <script>
            let currentVaccineScheduleId = null;
            let allVaccineSchedules = [];

            // Toggle frequency field based on booster checkbox
            document.addEventListener('DOMContentLoaded', () => {
                const boosterCheckbox = document.getElementById('scheduleIsBooster');
                if (boosterCheckbox) {
                    boosterCheckbox.addEventListener('change', (e) => {
                        document.getElementById('frequencyField').style.display = e.target.checked ? 'block' : 'none';
                    });
                }
            });

            // Load vaccine schedules
            async function loadVaccineSchedules() {
                try {
                    const response = await fetch(`${API_URL}/vaccine-schedules`);
                    allVaccineSchedules = await response.json();
                    displayVaccineSchedules();
                } catch (error) {
                    console.error('Error loading vaccine schedules:', error);
                    document.getElementById('vaccineSchedulesTableContainer').innerHTML = 
                        '<div class="loading">‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏î‡πâ</div>';
                }
            }

            // Display vaccine schedules
            function displayVaccineSchedules() {
                const container = document.getElementById('vaccineSchedulesTableContainer');
                
                if (allVaccineSchedules.length === 0) {
                    container.innerHTML = `
                        <div style="text-align: center; padding: 60px; color: #999;">
                            <div style="font-size: 60px; margin-bottom: 15px;">üíâ</div>
                            <p>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏Ñ‡∏ã‡∏µ‡∏ô</p>
                        </div>
                    `;
                    return;
                }
                
                let html = `
                    <table style="width: 100%; border-collapse: collapse;">
                        <thead>
                            <tr style="background: #f5f7fa;">
                                <th style="padding: 15px; text-align: left;">‡∏ä‡∏∑‡πà‡∏≠‡∏ß‡∏±‡∏Ñ‡∏ã‡∏µ‡∏ô</th>
                                <th style="padding: 15px; text-align: center;">‡∏≠‡∏≤‡∏¢‡∏∏ (‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå)</th>
                                <th style="padding: 15px; text-align: center;">‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó</th>
                                <th style="padding: 15px; text-align: center;">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</th>
                            </tr>
                        </thead>
                        <tbody>
                `;
                
                allVaccineSchedules.forEach(schedule => {
                    const ageRange = schedule.age_weeks_max 
                        ? `${schedule.age_weeks_min}-${schedule.age_weeks_max}`
                        : `${schedule.age_weeks_min}+`;
                    
                    const type = schedule.is_booster 
                        ? `<span style="background: #e6f7ff; color: #1890ff; padding: 4px 8px; border-radius: 4px;">üîÑ Booster</span>`
                        : `<span style="background: #f0f0f0; color: #666; padding: 4px 8px; border-radius: 4px;">‡∏ß‡∏±‡∏Ñ‡∏ã‡∏µ‡∏ô‡∏õ‡∏Å‡∏ï‡∏¥</span>`;
                    
                    html += `
                        <tr style="border-bottom: 1px solid #f0f0f0;">
                            <td style="padding: 15px;">
                                <strong>${schedule.vaccine_name}</strong>
                                ${schedule.description ? `<br><small style="color: #999;">${schedule.description}</small>` : ''}
                            </td>
                            <td style="padding: 15px; text-align: center;">${ageRange}</td>
                            <td style="padding: 15px; text-align: center;">${type}</td>
                            <td style="padding: 15px; text-align: center;">
                                <button class="action-btn btn-edit" onclick="editVaccineSchedule(${schedule.id})" style="margin-right: 5px;">
                                    ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç
                                </button>
                                <button class="action-btn btn-delete" onclick="deleteVaccineSchedule(${schedule.id}, '${schedule.vaccine_name.replace(/'/g, "\\'")}')">
                                    ‡∏•‡∏ö
                                </button>
                            </td>
                        </tr>
                    `;
                });
                
                html += '</tbody></table>';
                container.innerHTML = html;
            }

            // Open vaccine schedule modal
            function openVaccineScheduleModal() {
                currentVaccineScheduleId = null;
                document.getElementById('vaccineScheduleModalTitle').textContent = '‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏Ñ‡∏ã‡∏µ‡∏ô';
                document.getElementById('vaccineScheduleForm').reset();
                document.getElementById('frequencyField').style.display = 'none';
                document.getElementById('vaccineScheduleModal').style.display = 'flex';
            }

            // Close vaccine schedule modal
            function closeVaccineScheduleModal() {
                document.getElementById('vaccineScheduleModal').style.display = 'none';
            }

            // Edit vaccine schedule
            function editVaccineSchedule(scheduleId) {
                const schedule = allVaccineSchedules.find(s => s.id === scheduleId);
                if (!schedule) return;
                
                currentVaccineScheduleId = scheduleId;
                document.getElementById('vaccineScheduleModalTitle').textContent = '‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏Ñ‡∏ã‡∏µ‡∏ô';
                document.getElementById('scheduleVaccineName').value = schedule.vaccine_name;
                document.getElementById('scheduleAgeMin').value = schedule.age_weeks_min;
                document.getElementById('scheduleAgeMax').value = schedule.age_weeks_max || '';
                document.getElementById('scheduleIsBooster').checked = schedule.is_booster;
                document.getElementById('scheduleFrequency').value = schedule.frequency_years || '';
                document.getElementById('scheduleDescription').value = schedule.description || '';
                
                document.getElementById('frequencyField').style.display = schedule.is_booster ? 'block' : 'none';
                document.getElementById('vaccineScheduleModal').style.display = 'flex';
            }

            // Handle vaccine schedule submit
            async function handleVaccineScheduleSubmit(event) {
                event.preventDefault();
                
                const data = {
                    vaccine_name: document.getElementById('scheduleVaccineName').value,
                    age_weeks_min: parseInt(document.getElementById('scheduleAgeMin').value),
                    age_weeks_max: document.getElementById('scheduleAgeMax').value ? parseInt(document.getElementById('scheduleAgeMax').value) : null,
                    is_booster: document.getElementById('scheduleIsBooster').checked,
                    frequency_years: document.getElementById('scheduleFrequency').value ? parseInt(document.getElementById('scheduleFrequency').value) : null,
                    description: document.getElementById('scheduleDescription').value
                };
                
                try {
                    const url = currentVaccineScheduleId 
                        ? `${API_URL}/vaccine-schedules/${currentVaccineScheduleId}`
                        : `${API_URL}/vaccine-schedules`;
                    
                    const response = await fetch(url, {
                        method: currentVaccineScheduleId ? 'PUT' : 'POST',
                        headers: {
                            'Authorization': `Bearer ${localStorage.getItem('token')}`,
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify(data)
                    });
                    
                    if (response.ok) {
                        alert(currentVaccineScheduleId ? '‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏Ñ‡∏ã‡∏µ‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à' : '‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏Ñ‡∏ã‡∏µ‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à');
                        closeVaccineScheduleModal();
                        loadVaccineSchedules();
                    } else {
                        alert('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î');
                    }
                } catch (error) {
                    console.error('Error:', error);
                    alert('‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ö‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå‡πÑ‡∏î‡πâ');
                }
            }

            // Delete vaccine schedule
            async function deleteVaccineSchedule(scheduleId, vaccineName) {
                if (!confirm(`‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö "${vaccineName}" ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?\n\n‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏à‡∏∞‡∏™‡πà‡∏á‡∏ú‡∏•‡∏Å‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏ß‡∏±‡∏Ñ‡∏ã‡∏µ‡∏ô‡πÉ‡∏´‡πâ‡∏Å‡∏±‡∏ö‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô`)) {
                    return;
                }
                
                try {
                    const response = await fetch(`${API_URL}/vaccine-schedules/${scheduleId}`, {
                        method: 'DELETE',
                        headers: {
                            'Authorization': `Bearer ${localStorage.getItem('token')}`
                        }
                    });
                    
                    if (response.ok) {
                        alert('‡∏•‡∏ö‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏Ñ‡∏ã‡∏µ‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à');
                        loadVaccineSchedules();
                    } else {
                        alert('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î');
                    }
                } catch (error) {
                    console.error('Error:', error);
                    alert('‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ö‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå‡πÑ‡∏î‡πâ');
                }
            }

            // Load schedules when section is shown
            const originalLoadVaccineTypes = loadVaccineTypes || function() {};
            loadVaccineTypes = function() {
                loadVaccineSchedules();
            };
            </script><div id="vaccinesSection" style="display: none;">
                <div class="card" style="margin-bottom: 30px;">
                    <div class="card-header">
                        <h3 class="card-title">üíâ ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≤‡∏¢‡∏û‡∏±‡∏ô‡∏ò‡∏∏‡πå‡∏™‡∏±‡∏ï‡∏ß‡πå‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á</h3>
                        <button class="action-btn btn-edit" onclick="openVaccineModal()" 
                                style="padding: 12px 24px; font-size: 1rem;">
                            + ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å
                        </button>
                    </div>
                </div>

                <!-- Search and Filter -->
                <div style="background: white; padding: 20px; border-radius: 12px; margin-bottom: 20px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
                    <input type="text" id="vaccineSearch" placeholder="üîç ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏≤‡∏¢‡∏û‡∏±‡∏ô‡∏ò‡∏∏‡πå" 
                        onkeyup="filterVaccines()"
                        style="width: 100%; padding: 12px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 1rem;">
                </div>

                <!-- Vaccine Table -->
                <div class="card">
                    <div id="vaccinesTableContainer">
                        <div class="loading">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...</div>
                    </div>
                </div>
            </div>

            <!-- Vaccine Modal -->
            <div id="vaccineModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
                background: rgba(0,0,0,0.5); z-index: 1000; align-items: center; justify-content: center;">
                <div style="background: white; border-radius: 15px; padding: 30px; max-width: 500px; width: 90%; max-height: 90vh; overflow-y: auto;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                        <h2 id="vaccineModalTitle">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≤‡∏¢‡∏û‡∏±‡∏ô‡∏ò‡∏∏‡πå‡∏™‡∏±‡∏ï‡∏ß‡πå‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á</h2>
                        <button onclick="closeVaccineModal()" style="background: none; border: none; font-size: 1.5rem; cursor: pointer;">√ó</button>
                    </div>

                    <form id="vaccineForm" onsubmit="handleVaccineSubmit(event)">
                        <div style="margin-bottom: 20px;">
                            <label style="display: block; margin-bottom: 8px; font-weight: 600;">‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏≤‡∏¢‡∏û‡∏±‡∏ô‡∏ò‡∏∏‡πå *</label>
                            <input type="text" id="vaccineName" required 
                                style="width: 100%; padding: 12px; border: 2px solid #e0e0e0; border-radius: 8px;">
                        </div>

                        <div style="margin-bottom: 20px;">
                            <label style="display: block; margin-bottom: 8px; font-weight: 600;">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</label>
                            <input type="date" id="vaccineDueDate" 
                                style="width: 100%; padding: 12px; border: 2px solid #e0e0e0; border-radius: 8px;">
                        </div>

                        <div style="display: flex; gap: 10px; justify-content: flex-end;">
                            <button type="button" onclick="closeVaccineModal()" 
                                    style="padding: 12px 24px; background: #f0f0f0; border: none; border-radius: 8px; cursor: pointer;">
                                ‡∏•‡∏ö
                            </button>
                            <button type="submit" 
                                    style="padding: 12px 24px; background: #1890ff; color: white; border: none; border-radius: 8px; cursor: pointer;">
                                ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å
                            </button>
                        </div>
                    </form>
                </div>
            </div>

            <style>
            .vaccine-table {
                width: 100%;
                border-collapse: collapse;
            }

            .vaccine-table th {
                background: #f5f7fa;
                padding: 15px;
                text-align: left;
                font-weight: 600;
                color: #333;
                border-bottom: 2px solid #e0e0e0;
            }

            .vaccine-table td {
                padding: 15px;
                border-bottom: 1px solid #f0f0f0;
                color: #666;
            }

            .vaccine-table tr:hover {
                background: #fafafa;
            }

            .pagination {
                display: flex;
                justify-content: center;
                align-items: center;
                gap: 10px;
                margin-top: 20px;
            }

            .page-btn {
                padding: 8px 12px;
                border: 1px solid #e0e0e0;
                background: white;
                border-radius: 6px;
                cursor: pointer;
                transition: all 0.3s;
            }

            .page-btn:hover {
                background: #f5f7fa;
            }

            .page-btn.active {
                background: #1890ff;
                color: white;
                border-color: #1890ff;
            }

            .page-btn:disabled {
                opacity: 0.5;
                cursor: not-allowed;
            }
            </style>

            <script>
            let currentVaccineId = null;
            let allVaccineTypes = [];
            let filteredVaccineTypes = [];
            let currentPage = 1;
            const itemsPerPage = 8;

            // Load vaccine types
            async function loadVaccineTypes() {
                try {
                    const response = await fetch(`${API_URL}/vaccine-types`);
                    allVaccineTypes = await response.json();
                    filteredVaccineTypes = [...allVaccineTypes];
                    displayVaccineTypes();
                } catch (error) {
                    console.error('Error loading vaccine types:', error);
                    document.getElementById('vaccinesTableContainer').innerHTML = 
                        '<div class="loading">‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏î‡πâ</div>';
                }
            }

            // Display vaccine types in table with pagination
            function displayVaccineTypes() {
                const container = document.getElementById('vaccinesTableContainer');
                
                if (filteredVaccineTypes.length === 0) {
                    container.innerHTML = `
                        <div style="text-align: center; padding: 60px; color: #999;">
                            <div style="font-size: 60px; margin-bottom: 15px;">üíâ</div>
                            <p>‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</p>
                        </div>
                    `;
                    return;
                }
                
                // Calculate pagination
                const totalPages = Math.ceil(filteredVaccineTypes.length / itemsPerPage);
                const startIndex = (currentPage - 1) * itemsPerPage;
                const endIndex = startIndex + itemsPerPage;
                const currentItems = filteredVaccineTypes.slice(startIndex, endIndex);
                
                let html = `
                    <table class="vaccine-table">
                        <thead>
                            <tr>
                                <th style="width: 50px;">#</th>
                                <th>‡∏ä‡∏∑‡πà‡∏≠</th>
                                <th>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</th>
                                <th style="width: 150px; text-align: center;">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</th>
                            </tr>
                        </thead>
                        <tbody>
                `;
                
                currentItems.forEach((vaccine, index) => {
                    const globalIndex = startIndex + index + 1;
                    html += `
                        <tr>
                            <td>${globalIndex}</td>
                            <td><strong>${vaccine.name}</strong></td>
                            <td>${vaccine.due_date ? new Date(vaccine.due_date).toLocaleDateString('th-TH', { 
                                year: 'numeric', 
                                month: 'long', 
                                day: 'numeric' 
                            }) : '-'}</td>
                            <td style="text-align: center;">
                                <button class="action-btn btn-edit" onclick="editVaccineType(${vaccine.id})" 
                                        style="margin-right: 5px; padding: 6px 12px;">
                                    ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç
                                </button>
                                <button class="action-btn btn-delete" onclick="deleteVaccineType(${vaccine.id}, '${vaccine.name.replace(/'/g, "\\'")}')">
                                    ‡∏•‡∏ö
                                </button>
                            </td>
                        </tr>
                    `;
                });
                
                html += '</tbody></table>';
                
                // Add pagination
                if (totalPages > 1) {
                    html += '<div class="pagination">';
                    html += `<button class="page-btn" onclick="changePage(${currentPage - 1})" ${currentPage === 1 ? 'disabled' : ''}>‚óÄ</button>`;
                    
                    for (let i = 1; i <= totalPages; i++) {
                        html += `<button class="page-btn ${i === currentPage ? 'active' : ''}" onclick="changePage(${i})">${i}</button>`;
                    }
                    
                    html += `<button class="page-btn" onclick="changePage(${currentPage + 1})" ${currentPage === totalPages ? 'disabled' : ''}>‚ñ∂</button>`;
                    html += `<span style="color: #999; margin-left: 10px;">/ ${totalPages} ‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</span>`;
                    html += '</div>';
                }
                
                container.innerHTML = html;
            }

            // Change page
            function changePage(page) {
                const totalPages = Math.ceil(filteredVaccineTypes.length / itemsPerPage);
                if (page < 1 || page > totalPages) return;
                currentPage = page;
                displayVaccineTypes();
            }

            // Filter vaccines
            function filterVaccines() {
                const searchTerm = document.getElementById('vaccineSearch').value.toLowerCase();
                filteredVaccineTypes = allVaccineTypes.filter(v => 
                    v.name.toLowerCase().includes(searchTerm)
                );
                currentPage = 1;
                displayVaccineTypes();
            }

            // Open vaccine modal
            function openVaccineModal() {
                currentVaccineId = null;
                document.getElementById('vaccineModalTitle').textContent = '‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≤‡∏¢‡∏û‡∏±‡∏ô‡∏ò‡∏∏‡πå‡∏™‡∏±‡∏ï‡∏ß‡πå‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á';
                document.getElementById('vaccineForm').reset();
                document.getElementById('vaccineModal').style.display = 'flex';
            }

            // Close vaccine modal
            function closeVaccineModal() {
                document.getElementById('vaccineModal').style.display = 'none';
            }

            // Edit vaccine type
            function editVaccineType(vaccineId) {
                const vaccine = allVaccineTypes.find(v => v.id === vaccineId);
                if (!vaccine) return;
                
                currentVaccineId = vaccineId;
                document.getElementById('vaccineModalTitle').textContent = '‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≤‡∏¢‡∏û‡∏±‡∏ô‡∏ò‡∏∏‡πå';
                document.getElementById('vaccineName').value = vaccine.name;
                document.getElementById('vaccineDueDate').value = vaccine.due_date || '';
                
                document.getElementById('vaccineModal').style.display = 'flex';
            }

            // Handle vaccine submit
            async function handleVaccineSubmit(event) {
                event.preventDefault();
                
                const data = {
                    name: document.getElementById('vaccineName').value,
                    due_date: document.getElementById('vaccineDueDate').value
                };
                
                try {
                    const url = currentVaccineId 
                        ? `${API_URL}/vaccine-types/${currentVaccineId}`
                        : `${API_URL}/vaccine-types`;
                    
                    const response = await fetch(url, {
                        method: currentVaccineId ? 'PUT' : 'POST',
                        headers: {
                            'Authorization': `Bearer ${localStorage.getItem('token')}`,
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify(data)
                    });
                    
                    if (response.ok) {
                        alert(currentVaccineId ? '‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à' : '‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à');
                        closeVaccineModal();
                        loadVaccineTypes();
                    } else {
                        alert('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î');
                    }
                } catch (error) {
                    console.error('Error:', error);
                    alert('‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ö‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå‡πÑ‡∏î‡πâ');
                }
            }

            // Delete vaccine type
            async function deleteVaccineType(vaccineId, vaccineName) {
                if (!confirm(`‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö "${vaccineName}" ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?`)) {
                    return;
                }
                
                try {
                    const response = await fetch(`${API_URL}/vaccine-types/${vaccineId}`, {
                        method: 'DELETE',
                        headers: {
                            'Authorization': `Bearer ${localStorage.getItem('token')}`
                        }
                    });
                    
                    if (response.ok) {
                        alert('‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à');
                        loadVaccineTypes();
                    } else {
                        alert('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î');
                    }
                } catch (error) {
                    console.error('Error:', error);
                    alert('‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ö‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå‡πÑ‡∏î‡πâ');
                }
            }
            </script>
        </div>
    </div>

    <script src="/js/config.js"></script>
    <script>
        const API_URL = CONFIG.API_URL;
        let allUsers = [];

        // Check admin auth
        function checkAuth() {
            const token = localStorage.getItem('token');
            const user = localStorage.getItem('user');
            
            if (!token || !user) {
                window.location.href = 'index.html';
                return;
            }
            
            const currentUser = JSON.parse(user);
            if (currentUser.role !== 'admin') {
                alert('‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏ô‡∏µ‡πâ');
                window.location.href = 'index.html';
                return;
            }
            
            document.getElementById('adminName').textContent = currentUser.full_name || currentUser.username;
            loadUsers();
            loadStats();
        }

        // Load statistics
        async function loadStats() {
            try {
                const response = await fetch(`${API_URL}/admin/stats`, {
                    headers: {
                        'Authorization': `Bearer ${localStorage.getItem('token')}`
                    }
                });
                
                const stats = await response.json();
                document.getElementById('totalUsers').textContent = stats.total_users || 0;
                document.getElementById('totalPets').textContent = stats.total_pets || 0;
                document.getElementById('totalChats').textContent = stats.total_chats || 0;
            } catch (error) {
                console.error('Error loading stats:', error);
            }
        }

        // Load users
        async function loadUsers() {
            try {
                const response = await fetch(`${API_URL}/admin/users`, {
                    headers: {
                        'Authorization': `Bearer ${localStorage.getItem('token')}`
                    }
                });
                
                allUsers = await response.json();
                displayUsers(allUsers);
                updateUserCounts();
            } catch (error) {
                console.error('Error loading users:', error);
                document.getElementById('usersTableContainer').innerHTML = 
                    '<div class="loading">‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏î‡πâ</div>';
            }
        }

        // Display users in table
        function displayUsers(users) {
            const container = document.getElementById('usersTableContainer');
            
            if (users.length === 0) {
                container.innerHTML = '<div class="loading">‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ</div>';
                return;
            }
            
            let html = `
                <table>
                    <thead>
                        <tr>
                            <th>#</th>
                            <th>‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ</th>
                            <th>‡∏™‡∏±‡∏ï‡∏ß‡πå‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á</th>
                            <th>‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î</th>
                            <th>‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡πÄ‡∏°‡∏∑‡πà‡∏≠</th>
                            <th>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</th>
                            <th>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</th>
                        </tr>
                    </thead>
                    <tbody>
            `;
            
            users.forEach((user, index) => {
                const status = user.role === 'hide' ? 'hide' : 'active';
                const statusClass = status === 'active' ? 'status-active' : 'status-hide';
                const statusText = status === 'active' ? 'active' : 'hide';
                
                html += `
                    <tr>
                        <td>${index + 1}</td>
                        <td>
                            <strong>${user.full_name || user.username}</strong><br>
                            <small style="color: #999;">${user.email}</small>
                        </td>
                        <td>${user.pet_count || 0}</td>
                        <td>${new Date(user.updated_at).toLocaleDateString('th-TH')}</td>
                        <td>${new Date(user.created_at).toLocaleDateString('th-TH')}</td>
                        <td><span class="status-badge ${statusClass}">${statusText}</span></td>
                        <td>
                            <button class="action-btn btn-edit" onclick="toggleUserStatus(${user.id}, '${status}')">
                                ${status === 'active' ? '‡∏ã‡πà‡∏≠‡∏ô' : '‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ'}
                            </button>
                            <button class="action-btn btn-delete" onclick="deleteUser(${user.id}, '${user.username}')">
                                ‡∏•‡∏ö
                            </button>
                        </td>
                    </tr>
                `;
            });
            
            html += '</tbody></table>';
            container.innerHTML = html;
        }

        // Update user counts
        function updateUserCounts() {
            const activeCount = allUsers.filter(u => u.role !== 'hide').length;
            const hiddenCount = allUsers.filter(u => u.role === 'hide').length;
            
            document.getElementById('activeUsers').textContent = activeCount;
            document.getElementById('hiddenUsers').textContent = hiddenCount;
        }

        // Filter users
        function filterUsers() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            const filtered = allUsers.filter(user => 
                user.username.toLowerCase().includes(searchTerm) ||
                user.email.toLowerCase().includes(searchTerm) ||
                (user.full_name && user.full_name.toLowerCase().includes(searchTerm))
            );
            displayUsers(filtered);
        }

        // Toggle user status
        async function toggleUserStatus(userId, currentStatus) {
            const newStatus = currentStatus === 'active' ? 'hide' : 'user';
            
            if (!confirm(`‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô ${newStatus === 'hide' ? '‡∏ã‡πà‡∏≠‡∏ô' : '‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô'}?`)) {
                return;
            }
            
            try {
                const response = await fetch(`${API_URL}/admin/users/${userId}/status`, {
                    method: 'PUT',
                    headers: {
                        'Authorization': `Bearer ${localStorage.getItem('token')}`,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ status: newStatus })
                });
                
                if (response.ok) {
                    alert('‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à');
                    loadUsers();
                } else {
                    alert('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î');
                }
            } catch (error) {
                console.error('Error:', error);
                alert('‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ö‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå‡πÑ‡∏î‡πâ');
            }
        }

        // Delete user
        async function deleteUser(userId, username) {
            if (!confirm(`‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ "${username}" ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?\n\n‡∏Å‡∏≤‡∏£‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡∏ô‡∏µ‡πâ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏î‡πâ`)) {
                return;
            }
            
            try {
                const response = await fetch(`${API_URL}/admin/users/${userId}`, {
                    method: 'DELETE',
                    headers: {
                        'Authorization': `Bearer ${localStorage.getItem('token')}`
                    }
                });
                
                if (response.ok) {
                    alert('‡∏•‡∏ö‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à');
                    loadUsers();
                } else {
                    const data = await response.json();
                    alert(data.error || '‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î');
                }
            } catch (error) {
                console.error('Error:', error);
                alert('‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ö‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå‡πÑ‡∏î‡πâ');
            }
        }

        // Show section
        function showSection(section) {
            // Hide all sections
            document.querySelectorAll('[id$="Section"]').forEach(el => el.style.display = 'none');
            
            // Show selected section
            document.getElementById(section + 'Section').style.display = 'block';
            
            // Update active menu
            document.querySelectorAll('.menu-item').forEach(item => item.classList.remove('active'));
            event.target.closest('.menu-item').classList.add('active');
            
            // Update page title
            const titles = {
                'users': '‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô',
                'breeds': '‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏î‡∏π‡πÅ‡∏•‡∏™‡∏±‡∏ï‡∏ß‡πå‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á',
                'blog': '‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ö‡∏ó‡∏Ñ‡∏ß‡∏≤‡∏°',
                'vaccines': '‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ß‡∏±‡∏Ñ‡∏ã‡∏µ‡∏ô',
                'stats': '‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡∏∞‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•'
            };
            document.getElementById('pageTitle').textContent = titles[section] || 'Admin Panel';
            
            // Load data for specific sections
            if (section === 'breeds') {
                loadBreeds();
            } else if (section === 'blog') {
                loadBlogPosts();
            } else if (section === 'vaccines') {
                loadVaccineSchedules();
            } else if (section === 'stats') {
                loadStatsAndCharts();
            }
        }

        // // Logout
        // function logout() {
        //     if (confirm('‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö?')) {
        //         localStorage.removeItem('token');
        //         localStorage.removeItem('user');
        //         window.location.href = 'index.html';
        //     }
        // }

        // // Initialize
        // document.addEventListener('DOMContentLoaded', () => {
        //     checkAuth();
            
        //     // Add logout button listener
        //     document.getElementById('logoutBtn').addEventListener('click', logout);
        // });

    </script>
</body>
</html>